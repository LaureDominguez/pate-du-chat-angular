<div class="container">
    <!-- produits -->
    <div>
        <h2>Liste des produits</h2>
        <button mat-button (click)="addProduct()">Ajouter un produit</button>

        <table mat-table [dataSource]="products" matSort #productsSort="matSort">

            <!-- Nom Column -->
            <ng-container matColumnDef="name">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>Nom</th>
                <td mat-cell *matCellDef="let product">{{ product.name }}</td>
            </ng-container>

            <!-- Composition Column -->
            <ng-container matColumnDef="category">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>Catégorie</th>
                <td mat-cell *matCellDef="let product">{{ product.category }}</td>
            </ng-container>

            <!-- Prix Column -->
            <ng-container matColumnDef="price">
                <th mat-header-cell *matHeaderCellDef>Prix</th>
                <td mat-cell *matCellDef="let product">{{ product.price }}</td>
            </ng-container>

            <!-- Stock Column -->
            <ng-container matColumnDef="stock">
                <th mat-header-cell *matHeaderCellDef>En stock</th>
                <td mat-cell *matCellDef="let product">{{ product.stock }}</td>
            </ng-container>

            <!-- Actions Column -->
            <ng-container matColumnDef="actions">
                <th mat-header-cell *matHeaderCellDef>Actions</th>
                <td mat-cell *matCellDef="let product">
                    <button mat-button (click)="editProduct(product)">Modifier</button>
                    <button mat-button (click)="deleteProduct(product)">Supprimer</button>
                </td>
            </ng-container>

            <!-- Header and Row Declarations -->
            <tr mat-header-row *matHeaderRowDef="displayedProductsColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedProductsColumns;"></tr>

        </table>

        <mat-paginator #productsPaginator [pageSize]="10"></mat-paginator>
    </div>

    <!-- ingrédients -->
    <div>
        <h2>Liste des ingrédients</h2>
        
        <button mat-button class="add" (click)="openIngredientForm(null)">Ajouter un ingrédient</button>
    
        <table class="ingredient-table" mat-table [dataSource]="ingredients" matSort #ingredientsSort="matSort">
    
            <!-- Nom Column -->
            <ng-container matColumnDef="name">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>Nom</th>
                <td mat-cell *matCellDef="let ingredient">{{ ingredient.name }}</td>
            </ng-container>
    
            <!-- Fournisseur Column -->
            <ng-container matColumnDef="supplier">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>Fournisseur</th>
                <td mat-cell *matCellDef="let ingredient">{{ ingredient.supplier }}</td>
            </ng-container>
    
            <!-- Allergènes Column -->
            <ng-container matColumnDef="allergens">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>Allergènes</th>
                <td mat-cell *matCellDef="let ingredient">
                    <ng-container *ngIf="ingredient.allergens.length === 0; else listAllergens">
                        <mat-icon class="success">check_circle</mat-icon>
                    </ng-container>
                    <ng-template #listAllergens>
                        {{ ingredient.allergens.join(', ') }}
                    </ng-template>
                </td>
            </ng-container>
            <!-- Vegan Column -->
            <ng-container matColumnDef="vegan">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>Vegan</th>
                <td mat-cell *matCellDef="let ingredient">
                    <mat-icon class="success" *ngIf="ingredient.vegan; else notVegan">check_circle</mat-icon>
                    <ng-template #notVegan>
                        <mat-icon class="error">cancel</mat-icon>
                    </ng-template>
                </td>
            </ng-container>

            <!-- Vegeta Column -->
            <ng-container matColumnDef="vegeta">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>Végétarien</th>
                <td mat-cell *matCellDef="let ingredient">
                    <mat-icon class="success" *ngIf="ingredient.vegeta; else notVegeta">check_circle</mat-icon>
                    <ng-template #notVegeta>
                        <mat-icon class="error">cancel</mat-icon>
                    </ng-template>
                </td>
            </ng-container>
    
            <!-- Actions Column -->
            <ng-container matColumnDef="actions">
                <th mat-header-cell *matHeaderCellDef class="fixed-column-actions">Actions</th>
                <td mat-cell *matCellDef="let ingredient" class="fixed-column-actions">

                    <button mat-button class="animated-button edit" (click)="openIngredientForm(ingredient)">
                        <div class="content">
                            <mat-icon class="icon">edit</mat-icon>
                            <span class="text">Modifier</span>
                        </div>
                    </button>

                    <button mat-button class="animated-button delete" (click)="deleteIngredient(ingredient)">
                        <div class="content">
                            <mat-icon class="icon">delete</mat-icon>
                            <span class="text">Supprimer</span>
                        </div>
                    </button>

                </td>
            </ng-container>


            <!-- Header and Row Declarations -->
            <tr mat-header-row *matHeaderRowDef="displayedIngredientsColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedIngredientsColumns;"></tr>
    
        </table>
    
        <mat-paginator #ingredientsPaginator [pageSize]="10"></mat-paginator>
    </div>
</div>